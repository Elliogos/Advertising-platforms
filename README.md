# Инструкция по запуску веб-сервиса для работы с рекламными площадками

## 1. Требования

Перед запуском убедитесь, что у вас установлены:
- [.NET 6 (или выше)](https://dotnet.microsoft.com/download)
- [Visual Studio 2022](https://visualstudio.microsoft.com/) (или другая IDE, поддерживающая ASP.NET Core)
- (Опционально) Postman или браузер для тестирования API

## 2. Структура проекта

MyAdService/
  Controllers/
    AdvertisingController.cs  // Контроллер с методами загрузки и поиска
  Models/
    AdvertisingPlatform.cs      // Модель рекламной площадки
  Pages/
    Upload.cshtml               // Razor‑страница для загрузки файла
    Upload.cshtml.cs            // Код‑behind для страницы Upload
  Properties/
    launchSettings.json         // Настройки запуска (порты, URL, launchUrl)
  Program.cs                    // Точка входа и конфигурация приложения

## 3. Запуск проекта

### 3.1. Открытие проекта в Visual Studio

1. Запустите Visual Studio.
2. Откройте решение или проект **Advertising platforms** (файл с расширением `.sln`).

### 3.2. Проверка настроек запуска

1. Откройте файл `Properties/launchSettings.json` и убедитесь, что для выбранного профиля (например, `https`) указаны правильные параметры:
   - **applicationUrl**: должен включать адрес, например, `"https://localhost:7067;http://localhost:5253"`.
   - **launchUrl**: укажите `"Upload"`, чтобы при запуске открывалась страница загрузки (т.е. `https://localhost:7067/Upload`).

2. В верхней панели Visual Studio выберите профиль **https** для запуска.

### 3.3. Построение и запуск

1. Соберите проект через меню **Build** -> **Build Solution**.
2. Запустите проект (например, нажав **F5** или кнопку запуска).

При успешном запуске в браузере автоматически откроется страница: https://localhost:7067/Upload
Эта страница предназначена для загрузки файла с данными о рекламных площадках.

## 4. Работа с веб-сервисом

### 4.1. Загрузка рекламных площадок

1. На странице **Upload** вы увидите HTML‑форму для загрузки файла.
2. Файл должен быть текстовым (например, с расширением `.txt`) и содержать строки в формате: НазваниеПлощадки:/location1,/location2,...
Пример: Яндекс.Директ:/ru Ревдинский рабочий:/ru/svrd/revda,/ru/svrd/pervik Газета уральских москвичей:/ru/msk,/ru/permobl,/ru/chelobl Крутая реклама:/ru/svrd

3. Нажмите кнопку **Загрузить**. Если загрузка выполнена успешно, на странице отобразится сообщение:  
**"Файл успешно загружен."**
4. В папке проекта лежит файл platforms.txt для проверки работоспособности

### 4.2. Поиск рекламных площадок по локации

Чтобы получить список рекламных площадок для заданной локации, выполните GET‑запрос по следующему URL: https://localhost:7067/api/advertising/search?location=ВАША_ЛОКАЦИЯ
Например: https://localhost:7067/api/advertising/search?location=/ru/svrd/revda

Ответ будет возвращён в формате JSON с названиями подходящих рекламных площадок.

#### Способы тестирования поиска:

- **Через браузер:**  
  Введите URL запроса в адресной строке и нажмите Enter. Браузер покажет JSON‑ответ.

## 5. Запуск unit‑тестов

В решении уже включён проект с unit‑тестами (Advertising platforms.Tests) для проверки корректности работы методов загрузки и поиска рекламных площадок. Чтобы запустить тесты, выполните следующие действия:

1. Откройте Test Explorer в Visual Studio (меню Test → Test Explorer).
2. Соберите проект (Build Solution), чтобы тесты были обнаружены.
3. В окне Test Explorer нажмите Run All Tests.
4. Результаты выполнения тестов отобразятся в окне Test Explorer.

